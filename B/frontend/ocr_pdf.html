<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Handwritten Text Recognition</title>
</head>
<body>
  <h1>Handwritten Text Recognition</h1>
  <input type="file" accept=".pdf" id="pdfInput">
  <button onclick="uploadPDF()">Upload PDF</button>
 
  <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-ml.js"></script>
  <script>
	// Initialize Firebase
	const firebaseConfig = {
	  apiKey: "AIzaSyBz1pSw5rCyFXdmRtepCCryQLRrkGVdl7k",
	  authDomain: "auto-mark-grader.firebaseapp.com",
	  projectId: "auto-mark-grader",
	  storageBucket: "auto-mark-grader.appspot.com",
	  messagingSenderId: "1036661490233",
	  appId: "1:1036661490233:web:7d2b16ff18ee727ebfc3e8",
	  measurementId: "G-43ZSMWENXR"
	};
	firebase.initializeApp(firebaseConfig);
	firebase.analytics();

	// Function to upload PDF file to Firebase Storage
	function uploadPDF() {
  	const fileInput = document.getElementById('pdfInput');
  	const file = fileInput.files[0];
  	const storageRef = firebase.storage().ref();
  	const pdfRef = storageRef.child('pdfs/' + file.name);
 	 
  	pdfRef.put(file).then(() => {
    	// Perform OCR on the uploaded PDF
    	recognizeText(pdfRef);
  	}).catch(error => {
    	console.error('Error uploading PDF:', error);
  	});
	}

	// Function to perform text recognition on the uploaded PDF
	function recognizeText(pdfRef) {
  	const recognizer = firebase.ml().vision.textRecognizer();
  	recognizer.processImage(pdfRef)
    	.then(result => {
      	// Process OCR results
      	const recognizedText = result.text;
      	// Generate text file
      	const blob = new Blob([recognizedText], { type: 'text/plain' });
      	const downloadLink = document.createElement('a');
      	downloadLink.href = URL.createObjectURL(blob);
      	downloadLink.download = 'recognized_text.txt';
      	downloadLink.click();
    	})
    	.catch(error => {
      	console.error('Error performing OCR:', error);
    	});
	}
  </script>
</body>
</html>
