<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Fixed table header</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <link rel="stylesheet" href="institution.css">
  
</head>

<body>
  <section>
  <!--for demo wrap-->
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th>Exam</th>
          <th>Date</th>
          <th>Max Marks</th>
          <th>Avg Marks</th>
          <th>Contestants</th>
          <th>View Results</th>
        </tr>
      </thead>
    </table>
  </div>
  <div class="tbl-content">
    <table cellpadding="0" cellspacing="0" border="0">
      <tbody>
         <tr>
          <td>Data</td>
          <td>Comes </td>
          <td>here</td>
          <td>automatically</td>
          <td>on</td>
          <td>opening</td>
        </tr>
      </tbody>
    </table>
  </div>
  </section>


  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

  <script>
    // '.tbl-content' consumed little space for vertical scrollbar, scrollbar width depend on browser/os/platfrom. Here calculate the scollbar width .
    $(window).on("load resize ", function() {
      var scrollWidth = $('.tbl-content').width() - $('.tbl-content table').width();
      $('.tbl-header').css({'padding-right':scrollWidth});
    }).resize();

    // Send a GET request to the server when the page loads
    $(document).ready(function() {
      $.ajax({
        url: 'http://127.0.0.1:8000/view',
        method: 'GET',
        headers: {
          'Authorization': 'Bearer ' + sessionStorage.getItem('jwt')
        },
        success: function(data) {
          // Fill the table with the response
          var tbody = $('.tbl-content tbody');
          data.forEach(function(item) {
            var row = $('<tr>');
            row.append($('<td>').text(item.name));
            row.append($('<td>').text(item.date));
            row.append($('<td>').text(item.max_marks));
            row.append($('<td>').text(item.avg_marks || 'N/A'));
            row.append($('<td>').text(item.contestants));
            row.append($('<td>').html('<a href="viewexam.html">View Results</a>'));
            tbody.append(row);
          });
        }
      });
    });
  </script>

</body>
</html>
